\chapter{The Some Basic Libraries}
\label{chap:collection}
\jon{Work in progress!}

\jon{Discuss \lstinline{Fsharp.Core} and \lstinline{System} and all the operators and functions defined there.}
\jon{See \url{https://msdn.microsoft.com/en-us/visualfsharpdocs/conceptual/import-declarations-the-open-keyword-fsharp} for namespaces opened per default.}

\section{\lstinline{System.String}}
\label{sec:system.string}
The list of built-in methods accessible with the dot notation is defined in \lstinline|System.String| class and is long. Here follows short descriptions of some useful methods:
\begin{description}
%\item[\lstinline{Clone}] Returns a reference to this instance of String.
\item[\lstinline{Compare(String, String)}] Compares two specified String objects and returns an integer that indicates their relative position in the sort order.
%\item[\lstinline{Compare(String, String, Boolean)}] Compares two specified String objects, ignoring or honoring their case, and returns an integer that indicates their relative position in the sort order.
%\item[\lstinline{Compare(String, String, StringComparison)}] Compares two specified String objects using the specified rules, and returns an integer that indicates their relative position in the sort order.
%\item[\lstinline{Compare(String, String, Boolean, CultureInfo)}] Compares two specified String objects, ignoring or honoring their case, and using culture-specific information to influence the comparison, and returns an integer that indicates their relative position in the sort order.
%\item[\lstinline{Compare(String, String, CultureInfo, CompareOptions)}] Compares two specified String objects using the specified comparison options and culture-specific information to influence the comparison, and returns an integer that indicates the relationship of the two strings to each other in the sort order.
%\item[\lstinline{Compare(String, Int32, String, Int32, Int32)}] Compares substrings of two specified String objects and returns an integer that indicates their relative position in the sort order.
%\item[\lstinline{Compare(String, Int32, String, Int32, Int32, Boolean)}] Compares substrings of two specified String objects, ignoring or honoring their case, and returns an integer that indicates their relative position in the sort order.
%\item[\lstinline{Compare(String, Int32, String, Int32, Int32, StringComparison)}] Compares substrings of two specified String objects using the specified rules, and returns an integer that indicates their relative position in the sort order.
%\item[\lstinline{Compare(String, Int32, String, Int32, Int32, Boolean, CultureInfo)}] Compares substrings of two specified String objects, ignoring or honoring their case and using culture-specific information to influence the comparison, and returns an integer that indicates their relative position in the sort order.
%\item[\lstinline{Compare(String, Int32, String, Int32, Int32, CultureInfo, CompareOptions)}] Compares substrings of two specified String objects using the specified comparison options and culture-specific information to influence the comparison, and returns an integer that indicates the relationship of the two substrings to each other in the sort order.
\item[\lstinline{CompareOrdinal(String, String)}] Compares two specified String objects by evaluating the numeric values of the corresponding Char objects in each string.
\item[\lstinline{CompareOrdinal(String, Int32, String, Int32, Int32)}] Compares substrings of two specified String objects by evaluating the numeric values of the corresponding Char objects in each substring.
\item[\lstinline{CompareTo(Object)}] Compares this instance with a specified Object and indicates whether this instance precedes, follows, or appears in the same position in the sort order as the specified Object.
\item[\lstinline{CompareTo(String)}] Compares this instance with a specified String object and indicates whether this instance precedes, follows, or appears in the same position in the sort order as the specified String.
\item[\lstinline{Concat(Object)}] Creates the string representation of a specified object.
\item[\lstinline{Concat(Object[])}] Concatenates the string representations of the elements in a specified Object array.
\item[\lstinline{Concat(IEnumerable(String))}] Concatenates the members of a constructed IEnumerable(T) collection of type String.
\item[\lstinline{Concat(String[])}] Concatenates the elements of a specified String array.
\item[\lstinline{Concat(Object, Object)}] Concatenates the string representations of two specified objects.
\item[\lstinline{Concat(String, String)}] Concatenates two specified instances of String.
\item[\lstinline{Concat(Object, Object, Object)}] Concatenates the string representations of three specified objects.
\item[\lstinline{Concat(String, String, String)}] Concatenates three specified instances of String.
\item[\lstinline{Concat(Object, Object, Object, Object)}] Concatenates the string representations of four specified objects and any objects specified in an optional variable length parameter list.
\item[\lstinline{Concat(String, String, String, String)}] Concatenates four specified instances of String.
\item[\lstinline{Concat(T)(IEnumerable(T))}] Concatenates the members of an IEnumerable(T) implementation.
\item[\lstinline{Contains}] Returns a value indicating whether the specified String object occurs within this string.
\item[\lstinline{Copy}] Creates a new instance of String with the same value as a specified String.
\item[\lstinline{CopyTo}] Copies a specified number of characters from a specified position in this instance to a specified position in an array of Unicode characters.
\item[\lstinline{EndsWith(String)}] Determines whether the end of this string instance matches the specified string.
\item[\lstinline{EndsWith(String, StringComparison)}] Determines whether the end of this string instance matches the specified string when compared using the specified comparison option.
\item[\lstinline{EndsWith(String, Boolean, CultureInfo)}] Determines whether the end of this string instance matches the specified string when compared using the specified culture.
\item[\lstinline{Equals(Object)}] Determines whether this instance and a specified object, which must also be a String object, have the same value. (Overrides Object.Equals(Object).)
\item[\lstinline{Equals(String)}] Determines whether this instance and another specified String object have the same value.
\item[\lstinline{Equals(String, String)}] Determines whether two specified String objects have the same value.
\item[\lstinline{Equals(String, StringComparison)}] Determines whether this string and a specified String object have the same value. A parameter specifies the culture, case, and sort rules used in the comparison.
\item[\lstinline{Equals(String, String, StringComparison)}] Determines whether two specified String objects have the same value. A parameter specifies the culture, case, and sort rules used in the comparison.
\item[\lstinline{Finalize}] Allows an object to try to free resources and perform other cleanup operations before it is reclaimed by garbage collection. (Inherited from Object.)
\item[\lstinline{Format(String, Object)}] Replaces one or more format items in a specified string with the string representation of a specified object.
\item[\lstinline{Format(String, Object[])}] Replaces the format item in a specified string with the string representation of a corresponding object in a specified array.
\item[\lstinline{Format(IFormatProvider, String, Object[])}] Replaces the format item in a specified string with the string representation of a corresponding object in a specified array. A specified parameter supplies culture-specific formatting information.
\item[\lstinline{Format(String, Object, Object)}] Replaces the format items in a specified string with the string representation of two specified objects.
\item[\lstinline{Format(String, Object, Object, Object)}] Replaces the format items in a specified string with the string representation of three specified objects.
\item[\lstinline{GetEnumerator}] Retrieves an object that can iterate through the individual characters in this string.
\item[\lstinline{GetHashCode}] Returns the hash code for this string. (Overrides Object.GetHashCode().)
\item[\lstinline{GetType}] Gets the Type of the current instance. (Inherited from Object.)
\item[\lstinline{GetTypeCode}] Returns the TypeCode for class String.
\item[\lstinline{IndexOf(Char)}] Reports the zero-based index of the first occurrence of the specified Unicode character in this string.
\item[\lstinline{IndexOf(String)}] Reports the zero-based index of the first occurrence of the specified string in this instance.
\item[\lstinline{IndexOf(Char, Int32)}] Reports the zero-based index of the first occurrence of the specified Unicode character in this string. The search starts at a specified character position.
\item[\lstinline{IndexOf(String, Int32)}] Reports the zero-based index of the first occurrence of the specified string in this instance. The search starts at a specified character position.
\item[\lstinline{IndexOf(String, StringComparison)}] Reports the zero-based index of the first occurrence of the specified string in the current String object. A parameter specifies the type of search to use for the specified string.
\item[\lstinline{IndexOf(Char, Int32, Int32)}] Reports the zero-based index of the first occurrence of the specified character in this instance. The search starts at a specified character position and examines a specified number of character positions.
\item[\lstinline{IndexOf(String, Int32, Int32)}] Reports the zero-based index of the first occurrence of the specified string in this instance. The search starts at a specified character position and examines a specified number of character positions.
\item[\lstinline{IndexOf(String, Int32, StringComparison)}] Reports the zero-based index of the first occurrence of the specified string in the current String object. Parameters specify the starting search position in the current string and the type of search to use for the specified string.
\item[\lstinline{IndexOf(String, Int32, Int32, StringComparison)}] Reports the zero-based index of the first occurrence of the specified string in the current String object. Parameters specify the starting search position in the current string, the number of characters in the current string to search, and the type of search to use for the specified string.
\item[\lstinline{IndexOfAny(Char[])}] Reports the zero-based index of the first occurrence in this instance of any character in a specified array of Unicode characters.
\item[\lstinline{IndexOfAny(Char[], Int32)}] Reports the zero-based index of the first occurrence in this instance of any character in a specified array of Unicode characters. The search starts at a specified character position.
\item[\lstinline{IndexOfAny(Char[], Int32, Int32)}] Reports the zero-based index of the first occurrence in this instance of any character in a specified array of Unicode characters. The search starts at a specified character position and examines a specified number of character positions.
\item[\lstinline{Insert}] Returns a new string in which a specified string is inserted at a specified index position in this instance.
\item[\lstinline{Intern}] Retrieves the system's reference to the specified String.
\item[\lstinline{IsInterned}] Retrieves a reference to a specified String.
\item[\lstinline{IsNormalized()}] Indicates whether this string is in Unicode normalization form C.
\item[\lstinline{IsNormalized(NormalizationForm)}] Indicates whether this string is in the specified Unicode normalization form.
\item[\lstinline{IsNullOrEmpty}] Indicates whether the specified string is a null reference (Nothing in Visual Basic) or an Empty string.
\item[\lstinline{IsNullOrWhiteSpace}] Indicates whether a specified string is a null reference (Nothing in Visual Basic), empty, or consists only of whitespace characters.
\item[\lstinline{Join(String, IEnumerable(String))}] Concatenates the members of a constructed IEnumerable(T) collection of type String, using the specified separator between each member.
\item[\lstinline{Join(String, Object[])}] Concatenates the elements of an object array, using the specified separator between each element.
\item[\lstinline{Join(String, String[])}] Concatenates all the elements of a string array, using the specified separator between each element.
\item[\lstinline{Join(String, String[], Int32, Int32)}] Concatenates the specified elements of a string array, using the specified separator between each element.
\item[\lstinline{Join(T)(String, IEnumerable(T))}] Concatenates the members of a collection, using the specified separator between each member.
\item[\lstinline{LastIndexOf(Char)}] Reports the zero-based index position of the last occurrence of a specified Unicode character within this instance.
\item[\lstinline{LastIndexOf(String)}] Reports the zero-based index position of the last occurrence of a specified string within this instance.
\item[\lstinline{LastIndexOf(Char, Int32)}] Reports the zero-based index position of the last occurrence of a specified Unicode character within this instance. The search starts at a specified character position.
\item[\lstinline{LastIndexOf(String, Int32)}] Reports the zero-based index position of the last occurrence of a specified string within this instance. The search starts at a specified character position.
\item[\lstinline{LastIndexOf(String, StringComparison)}] Reports the zero-based index of the last occurrence of a specified string within the current String object. A parameter specifies the type of search to use for the specified string.
\item[\lstinline{LastIndexOf(Char, Int32, Int32)}] Reports the zero-based index position of the last occurrence of the specified Unicode character in a substring within this instance. The search starts at a specified character position and examines a specified number of character positions.
\item[\lstinline{LastIndexOf(String, Int32, Int32)}] Reports the zero-based index position of the last occurrence of a specified string within this instance. The search starts at a specified character position and examines a specified number of character positions.
\item[\lstinline{LastIndexOf(String, Int32, StringComparison)}] Reports the zero-based index of the last occurrence of a specified string within the current String object. Parameters specify the starting search position in the current string, and type of search to use for the specified string.
\item[\lstinline{LastIndexOf(String, Int32, Int32, StringComparison)}] Reports the zero-based index position of the last occurrence of a specified string within this instance. Parameters specify the starting search position in the current string, the number of characters in the current string to search, and the type of search to use for the specified string.
\item[\lstinline{LastIndexOfAny(Char[])}] Reports the zero-based index position of the last occurrence in this instance of one or more characters specified in a Unicode array.
\item[\lstinline{LastIndexOfAny(Char[], Int32)}] Reports the zero-based index position of the last occurrence in this instance of one or more characters specified in a Unicode array. The search starts at a specified character position.
\item[\lstinline{LastIndexOfAny(Char[], Int32, Int32)}] Reports the zero-based index position of the last occurrence in this instance of one or more characters specified in a Unicode array. The search starts at a specified character position and examines a specified number of character positions.
\item[\lstinline{MemberwiseClone}] Creates a shallow copy of the current Object. (Inherited from Object.)
\item[\lstinline{Normalize()}] Returns a new string whose textual value is the same as this string, but whose binary representation is in Unicode normalization form C.
\item[\lstinline{Normalize(NormalizationForm)}] Returns a new string whose textual value is the same as this string, but whose binary representation is in the specified Unicode normalization form.
\item[\lstinline{PadLeft(Int32)}] Returns a new string that right-aligns the characters in this instance by padding them with spaces on the left, for a specified total length.
\item[\lstinline{PadLeft(Int32, Char)}] Returns a new string that right-aligns the characters in this instance by padding them on the left with a specified Unicode character, for a specified total length.
\item[\lstinline{PadRight(Int32)}] Returns a new string that left-aligns the characters in this string by padding them with spaces on the right, for a specified total length.
\item[\lstinline{PadRight(Int32, Char)}] Returns a new string that left-aligns the characters in this string by padding them on the right with a specified Unicode character, for a specified total length.
\item[\lstinline{Remove(Int32)}] Returns a new string in which all the characters in the current instance, beginning at a specified position and continuing through the last position, have been deleted.
\item[\lstinline{Remove(Int32, Int32)}] Returns a new string in which a specified number of characters in this instance beginning at a specified position have been deleted.
\item[\lstinline{Replace(Char, Char)}] Returns a new string in which all occurrences of a specified Unicode character in this instance are replaced with another specified Unicode character.
\item[\lstinline{Replace(String, String)}] Returns a new string in which all occurrences of a specified string in the current instance are replaced with another specified string.
\item[\lstinline{Split(Char[])}] Returns a string array that contains the substrings in this instance that are delimited by elements of a specified Unicode character array.
\item[\lstinline{Split(Char[], Int32)}] Returns a string array that contains the substrings in this instance that are delimited by elements of a specified Unicode character array. A parameter specifies the maximum number of substrings to return.
\item[\lstinline{Split(Char[], StringSplitOptions)}] Returns a string array that contains the substrings in this string that are delimited by elements of a specified Unicode character array. A parameter specifies whether to return empty array elements.
\item[\lstinline{Split(String[], StringSplitOptions)}] Returns a string array that contains the substrings in this string that are delimited by elements of a specified string array. A parameter specifies whether to return empty array elements.
\item[\lstinline{Split(Char[], Int32, StringSplitOptions)}] Returns a string array that contains the substrings in this string that are delimited by elements of a specified Unicode character array. Parameters specify the maximum number of substrings to return and whether to return empty array elements.
\item[\lstinline{Split(String[], Int32, StringSplitOptions)}] Returns a string array that contains the substrings in this string that are delimited by elements of a specified string array. Parameters specify the maximum number of substrings to return and whether to return empty array elements.
\item[\lstinline{StartsWith(String)}] Determines whether the beginning of this string instance matches the specified string.
\item[\lstinline{StartsWith(String, StringComparison)}] Determines whether the beginning of this string instance matches the specified string when compared using the specified comparison option.
\item[\lstinline{StartsWith(String, Boolean, CultureInfo)}] Determines whether the beginning of this string instance matches the specified string when compared using the specified culture.
\item[\lstinline{Substring(Int32)}] Retrieves a substring from this instance. The substring starts at a specified character position.
\item[\lstinline{Substring(Int32, Int32)}] Retrieves a substring from this instance. The substring starts at a specified character position and has a specified length.
\item[\lstinline{ToCharArray()}] Copies the characters in this instance to a Unicode character array.
\item[\lstinline{ToCharArray(Int32, Int32)}] Copies the characters in a specified substring in this instance to a Unicode character array.
\item[\lstinline{ToLower()}] Returns a copy of this string converted to lowercase.
\item[\lstinline{ToLower(CultureInfo)}] Returns a copy of this string converted to lowercase, using the casing rules of the specified culture.
\item[\lstinline{ToLowerInvariant}] Returns a copy of this String object converted to lowercase using the casing rules of the invariant culture.
\item[\lstinline{ToString()}] Returns this instance of String; no actual conversion is performed. (Overrides Object.ToString().)
\item[\lstinline{ToString(IFormatProvider)}] Returns this instance of String; no actual conversion is performed.
\item[\lstinline{ToUpper()}] Returns a copy of this string converted to uppercase.
\item[\lstinline{ToUpper(CultureInfo)}] Returns a copy of this string converted to uppercase, using the casing rules of the specified culture.
\item[\lstinline{ToUpperInvariant}] Returns a copy of this String object converted to uppercase using the casing rules of the invariant culture.
\item[\lstinline{Trim()}] Removes all leading and trailing whitespace characters from the current String object.
\item[\lstinline{Trim(Char[])}] Removes all leading and trailing occurrences of a set of characters specified in an array from the current String object.
\item[\lstinline{TrimEnd}] Removes all trailing occurrences of a set of characters specified in an array from the current String object.
\item[\lstinline{TrimStart}] Removes all leading occurrences of a set of characters specified in an array from the current String object.
\end{description}


\section{List, arrays, and sequences}
In Table~\ref{tab:arrayMethods}.
\begin{table}
  \centering
  \begin{tabularx}{\textwidth}{|>{\hsize=.2\hsize}X|>{\hsize=1.8\hsize}X|}
    \hline
    append &Creates an array that contains the elements of one array followed by the elements of another array.\\
    average & Returns the average of the elements in an array.\\
    blit &Reads a range of elements from one array and writes them into another. \\
    choose &Applies a supplied function to each element of an array. Returns an array that contains the results x for each element for which the function returns Some(x).\\
    collect &Applies the supplied function to each element of an array, concatenates the results, and returns the combined array.\\
    concat &Creates an array that contains the elements of each of the supplied sequence of arrays.\\
    copy &Creates an array that contains the elements of the supplied array.\\
    create &Creates an array whose elements are all initially the supplied value.\\
    empty &Returns an empty array of the given type.\\
    exists &Tests whether any element of an array satisfies the supplied predicate.\\
    fill &Fills a range of elements of an array with the supplied value.\\
    filter &Returns a collection that contains only the elements of the supplied array for which the supplied condition returns true.\\
    find &Returns the first element for which the supplied function returns true. Raises System.Collections.Generic.KeyNotFoundException if no such element exists.\\
    findIndex &Returns the index of the first element in an array that satisfies the supplied condition. Raises System.Collections.Generic.KeyNotFoundException if none of the elements satisfy the condition.\\
    fold &Applies a function to each element of an array, threading an accumulator argument through the computation. If the input function is f and the array elements are i0...iN, this function computes f (...(f s i0)...) iN.\\
    foldBack &Applies a function to each element of an array, threading an accumulator argument through the computation. If the input function is f and the array elements are i0...iN, this function computes f i0 (...(f iN s)).\\
    forall &Tests whether all elements of an array satisfy the supplied condition.\\
    isEmpty &Tests whether an array has any elements.\\
    iter &Applies the supplied function to each element of an array.\\
    init &\dots\\
    length &Returns the length of an array. The System.Array.Length property does the same thing.\\
    map &Creates an array whose elements are the results of applying the supplied function to each of the elements of a supplied array.\\
    mapi &\\
    max &Returns the largest of all elements of an array. Operators.max is used to compare the elements.\\
    min &Returns the smallest of all elements of an array. Operators.min is used to compare the elements.\\
    ofList &Creates an array from the supplied list.\\
    ofSeq &Creates an array from the supplied enumerable object.\\
    partition &Splits an array into two arrays, one containing the elements for which the supplied condition returns true, and the other containing those for which it returns false.\\
    rev &Reverses the order of the elements in a supplied array. \\
    sort &Sorts the elements of an array and returns a new array. Operators.compare is used to compare the elements.\\
    sub &Creates an array that contains the sup<plied subrange, which is specified by starting index and length.\\
    sum &Returns the sum of the elements in the array.\\
    toList &Converts the supplied array to a list.\\
    toSeq &Views the supplied array as a sequence.\\
    unzip &Splits an array of tuple pairs into a tuple of two arrays.\\
    zeroCreate &Creates an array whose elements are all initially zero.\\
    zip &Combines two arrays into an array of tuples that have two elements. The two arrays must have equal lengths; otherwise, System.ArgumentException is raised.\\
    \hline
  \end{tabularx}
  \caption{Some built-in procedures in the Array module for arrays (from \protect\url{https://msdn.microsoft.com/en-us/visualfsharpdocs/conceptual/fsharp-core-library-reference})}
  \label{tab:arrayMethods}
\end{table}
Thus, the \lstinline{arrayReassign.fsx} program can be written using arrays as,
\fs{arrayReassignModule}{}
and the \lstinline{flowForListsIndex.fsx} program can be written using arrays as,
\fs{flowForListsIndexModule}{}
Both cases avoid the use of variables and side-effects which is a big advantage for code safety.

There are a bit few built-in procedures for 2 dimensional array types, some of which are summarized in Table~\ref{tab:array2dMethods}
\begin{table}
  \centering
  \begin{tabularx}{\textwidth}{|>{\hsize=.2\hsize}X|>{\hsize=1.8\hsize}X|}
    \hline
    blit &Reads a range of elements from one array and writes them into another. \\
    copy &Creates an array that contains the elements of the supplied array.\\
    create &Creates an array whose elements are all initially the supplied value.\\
    iter &Applies the supplied function to each element of an array.\\
    length1 &Returns the length of an array in the first dimension.\\
    length2 &Returns the length of an array in the second dimension.\\
    map &Creates an array whose elements are the results of applying the supplied function to each of the elements of a supplied array.\\
    mapi &\\
    zeroCreate &Creates an array whose elements are all initially zero.\\
    \hline
  \end{tabularx}
  \caption{Some built-in procedures in the Array2D module for arrays (from \protect\url{https://msdn.microsoft.com/en-us/visualfsharpdocs/conceptual/fsharp-core-library-reference})}
  \label{tab:array2dMethods}
\end{table}

\section{Mutable Collections}
\lstinline[language=console]|System.Collections.Generic|
\subsection{Mutable lists}
\lstinline[language=console]|List|,  \lstinline[language=console]|LinkedList|
\subsection{Stacks}
\lstinline[language=console]|Stack|
\subsection{Queues}  
\lstinline[language=console]|Queue|
\subsection{Sets and dictionaries}
\lstinline[language=console]|HashSet|,  and \lstinline[language=console]|Dictionary| from  

%%% Local Variables:
%%% TeX-master: "fsharpNotes"
%%% End:
