#!/usr/bin/expect -f

set timeout 5
set script [lindex $argv 0];

# Get the commands to run, one per line
set f [open $script]
set commands [split [read $f] "\n"]
close $f
#puts $commands

spawn fsharpi
expect "> "
send ";;\n"
# Iterate over the commands
foreach cmd $commands {
    expect "* "
    send -- "$cmd\n"
    sleep 1
}

# Tidy up
expect "* "
close
#expect "> "
#send "#quit;;\n"
