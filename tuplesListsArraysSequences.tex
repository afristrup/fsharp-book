\chapter{Tuples, Lists, Arrays, and Sequences}
\label{chap:lists}
F\# is tuned to work with lists.


However, an elegant alternative is available as
\fs{flowForLists}{}
This to be preferred, since we completely can ignore list boundary conditions and hence avoid out of range indexing. For comparison see a recursive implementation of the same,
\fs{flowForListsRecursive}{}
Note how this implementation avoids the use of variables in contrast to the previous examples.


\section{Tuples}
\jon{remember fst and snd Spec-4.0 Section 18.2.7}

\section{Lists}
\section{Arrays}
\subsection{1 dimensional arrays}
Roughly speaking, arrays are mutable lists, and may be created and indexed in the same manner, e.g.,
\fs{arrayCreation}{}
Notice that as for lists, arrays are indexed starting with 0, and that in this particular case it was necessary to specify the type of the argument for \texttt{printArray} as an array of integers with the \texttt{array} keyword. The \texttt{array} keyword is synonymous with '\verb|[]|'. Arrays do not support pattern matching, cannot be resized, but are mutable,
\fs{arrayReassign}{}
Notice that in spite the missing \texttt{mutable} keyword, the function \texttt{square} still had the side-effect of squaring alle entries in \texttt{A}. Arrays support \idx{slicing}, that is, indexing an array with a range results in a copy of array with values corresponding to the range, e.g.,
\fs{arraySlicing}{}
As illustrated, the missing start or end index implies from the first or to the last element.

There are quite a number of built-in procedures for all arrays some of which we summarize in Table~\ref{tab:arrayMethods}.
\begin{table}
  \centering
  \begin{tabularx}{\textwidth}{|>{\hsize=.2\hsize}X|>{\hsize=1.8\hsize}X|}
    \hline
    append &Creates an array that contains the elements of one array followed by the elements of another array.\\
    average & Returns the average of the elements in an array.\\
    blit &Reads a range of elements from one array and writes them into another. \\
    choose &Applies a supplied function to each element of an array. Returns an array that contains the results x for each element for which the function returns Some(x).\\
    collect &Applies the supplied function to each element of an array, concatenates the results, and returns the combined array.\\
    concat &Creates an array that contains the elements of each of the supplied sequence of arrays.\\
    copy &Creates an array that contains the elements of the supplied array.\\
    create &Creates an array whose elements are all initially the supplied value.\\
    empty &Returns an empty array of the given type.\\
    exists &Tests whether any element of an array satisfies the supplied predicate.\\
    fill &Fills a range of elements of an array with the supplied value.\\
    filter &Returns a collection that contains only the elements of the supplied array for which the supplied condition returns true.\\
    find &Returns the first element for which the supplied function returns true. Raises System.Collections.Generic.KeyNotFoundException if no such element exists.\\
    findIndex &Returns the index of the first element in an array that satisfies the supplied condition. Raises System.Collections.Generic.KeyNotFoundException if none of the elements satisfy the condition.\\
    fold &Applies a function to each element of an array, threading an accumulator argument through the computation. If the input function is f and the array elements are i0...iN, this function computes f (...(f s i0)...) iN.\\
    foldBack &Applies a function to each element of an array, threading an accumulator argument through the computation. If the input function is f and the array elements are i0...iN, this function computes f i0 (...(f iN s)).\\
    forall &Tests whether all elements of an array satisfy the supplied condition.\\
    isEmpty &Tests whether an array has any elements.\\
    iter &Applies the supplied function to each element of an array.\\
    init &\dots\\
    length &Returns the length of an array. The System.Array.Length property does the same thing.\\
    map &Creates an array whose elements are the results of applying the supplied function to each of the elements of a supplied array.\\
    mapi &\\
    max &Returns the largest of all elements of an array. Operators.max is used to compare the elements.\\
    min &Returns the smallest of all elements of an array. Operators.min is used to compare the elements.\\
    ofList &Creates an array from the supplied list.\\
    ofSeq &Creates an array from the supplied enumerable object.\\
    partition &Splits an array into two arrays, one containing the elements for which the supplied condition returns true, and the other containing those for which it returns false.\\
    rev &Reverses the order of the elements in a supplied array. \\
    sort &Sorts the elements of an array and returns a new array. Operators.compare is used to compare the elements.\\
    sub &Creates an array that contains the sup<plied subrange, which is specified by starting index and length.\\
    sum &Returns the sum of the elements in the array.\\
    toList &Converts the supplied array to a list.\\
    toSeq &Views the supplied array as a sequence.\\
    unzip &Splits an array of tuple pairs into a tuple of two arrays.\\
    zeroCreate &Creates an array whose elements are all initially zero.\\
    zip &Combines two arrays into an array of tuples that have two elements. The two arrays must have equal lengths; otherwise, System.ArgumentException is raised.\\
    \hline
  \end{tabularx}
  \caption{Some built-in procedures in the Array module for arrays (from \protect\url{https://msdn.microsoft.com/en-us/visualfsharpdocs/conceptual/fsharp-core-library-reference})}
  \label{tab:arrayMethods}
\end{table}
Thus, the \texttt{arrayReassign.fsx} program can be written using arrays as,
\fs{arrayReassignModule}{}
and the \texttt{flowForListsIndex.fsx} program can be written using arrays as,
\fs{flowForListsIndexModule}{}
Both cases avoid the use of variables and side-effects which is a big advantage for code safety.

\subsection{Multidimensional Arrays}
Higher dimensional arrays can be created as arrays of arrays (of arrays \dots). These are known as \idx{jagged arrays}, since there is no inherent control of that all sub-arrays are of similar size. E.g., the following is a jagged array of increasing width,
\fs{arrayJagged}{}
Indexing arrays of arrays is done sequentially, in the sense that in the above example, the number of outer arrays is \verb|a.Length|,  \verb|a.[i]| is the i'th array, the length of the i'th array is \verb|a.[i].Length|, and the j'th element of the i'th array is thus \verb|a.[i].[j]|. Often 2 dimensional square arrays are used, which can be implemented as a jagged array as,
\fs{arrayJaggedSquare}{}
In fact, square arrays of dimensions 2 to 4 are so common that fsharp has built-in modules for their support. In the following describe Array2D. The workings of Array3D and Array4D are very similar. An example of creating the same 2 dimensional array as above but as an \texttt{Array2D} is,
\fs{array2D}{}
Notice that the indexing uses a slightly different notation '\verb|[,]|' and the length functions are also slightly different. The statement \verb|A.Length| would return the total number of elements in the array, in this case 12.

\jon{note that \texttt{A.[1,*]} is a Array but \texttt{A.[1..1,*]} is an Array2D.}

There are a bit few built-in procedures for 2 dimensional array types, some of which are summarized in Table~\ref{tab:array2dMethods}
\begin{table}
  \centering
  \begin{tabularx}{\textwidth}{|>{\hsize=.2\hsize}X|>{\hsize=1.8\hsize}X|}
    \hline
    blit &Reads a range of elements from one array and writes them into another. \\
    copy &Creates an array that contains the elements of the supplied array.\\
    create &Creates an array whose elements are all initially the supplied value.\\
    iter &Applies the supplied function to each element of an array.\\
    length1 &Returns the length of an array in the first dimension.\\
    length2 &Returns the length of an array in the second dimension.\\
    map &Creates an array whose elements are the results of applying the supplied function to each of the elements of a supplied array.\\
    mapi &\\
    zeroCreate &Creates an array whose elements are all initially zero.\\
    \hline
  \end{tabularx}
  \caption{Some built-in procedures in the Array2D module for arrays (from \protect\url{https://msdn.microsoft.com/en-us/visualfsharpdocs/conceptual/fsharp-core-library-reference})}
  \label{tab:array2dMethods}
\end{table}
\section{Sequences}

%%% Local Variables:
%%% TeX-master: "fsharpNotes"
%%% End:
