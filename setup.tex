% Character set
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc} % ensure that all the characters in characterSets.tex prints

% Page setup
\usepackage[margin=25mm,outer=35mm,marginparsep=5mm]{geometry}

% Extra math stuff
\usepackage{amsmath}

% clickable url
\usepackage{url}

% figures
\usepackage{subfigure}

% paragraphs in tables
\usepackage{tabularx}

% formatting lists
\usepackage{enumitem}
%\setlist[description]{leftmargin=0pt,labelindent=0pt,itemindent=0pt}
%\setlist[description]{itemindent=-\leftmargin}

% latex comment environment
\usepackage{comment}

% Margin notes
%\usepackage{marginnote}

% Clickable table of content
\usepackage[pdfpagelabels]{hyperref}
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=black,
    urlcolor=black
}

% List of indices
\usepackage{makeidx}
\newcommand{\idxs}[1]{\index{#1}\marginpar{$\cdot$~\parbox[t]{25mm}{\raggedright #1}}}
% Define a new command idx with an optional parameter, which if given is the key to the index
\makeatletter
\def\idx{\@ifnextchar[{\@with}{\@without}}
\def\@with[#1]#2{\emph{#2}\idxs{#1}}
\def\@without#1{\emph{#1}\idxs{#1}}
\makeatother
%\newcommand{\idx}[1]{\emph{#1}\idxs{#1}}
\makeindex

%% lstlisting stuff
\usepackage{upquote}
\usepackage{listings}
\usepackage[framemethod=tikz]{mdframed}
\surroundwithmdframed[
  skipabove=10pt,
  innertopmargin=0pt,
%  rightmargin=0pt,
%  innerrightmargin=0pt,
  skipbelow=0pt,
  innerbottommargin=0pt
%  leftmargin=0pt,
%  innerleftmargin=0pt,
  ]{lstlisting}

\usepackage{color}
\definecolor{alternateKeywordsColor}{rgb}{0.13,1,0.13}
\definecolor{keywordsColor}{rgb}{0.13,0.13,1}
%\definecolor{commentsColor}{rgb}{0,0.5,0}
\definecolor{commentsColor}{rgb}{0,0.5,0}
%\definecolor{stringsColor}{rgb}{0.9,0,0}
\definecolor{stringsColor}{rgb}{0,0,0.5}
\definecolor{light-gray}{gray}{0.95}

\lstdefinelanguage{fsharp}%
{morekeywords={let, new, match, with, rec, open, module, namespace, type, of, member, % 
and, for, while, true, false, in, do, begin, end, fun, function, return, yield, try, %
mutable, if, then, else, cloud, async, static, use, abstract,
interface, inherit, finally, val, int, float},
  otherkeywords={ let!, return!, do!, yield!, use!, var, from, select,
    where, order, by, elif },
  keywordstyle=\color{keywordsColor},
  sensitive=true,
  basicstyle=\ttfamily,
  breaklines=true,
  morecomment=[l][\color{commentsColor}]{///},
  morecomment=[l][\color{commentsColor}]{//},
  morecomment=[s][\color{commentsColor}]{{(*}{*)}},
  morestring=[b]",
  showstringspaces=false,
  literate={`}{\`}1,
  stringstyle=\color{stringsColor},
  aboveskip=0pt, 
  belowskip=0pt,
  resetmargins=true,
  captionpos=b
}
\lstdefinelanguage{ebnf}%
{keywords={},
  morekeywords={},
  otherkeywords={},
  %otherkeywords={=, |, \{, \}, [, ], (, ), ;, (*, *)},
  keywordstyle=\color{keywordsColor},
  % keywordstyle={[2]\color{alternateKeywordsColor}},
  sensitive=true,
  basicstyle=\ttfamily, breaklines=true,
  morecomment=[s][\color{commentsColor}]{{(*}{*)}},
  morestring=[b]",
  morestring=[b]',
  showstringspaces=false,
  stringstyle=\color{stringsColor},
  aboveskip=0pt, 
  belowskip=0pt,
  resetmargins=true,
  captionpos=b
}
\lstdefinelanguage{console}%
{keywords={},
  morekeywords={},
  otherkeywords={},
  basicstyle=\ttfamily, breaklines=true,
  %xleftmargin=\parindent,
  showstringspaces=false,
  aboveskip=0pt, 
  belowskip=0pt,
  resetmargins=true,
  captionpos=b
}
\lstset{language=console}
\usepackage{caption}
\DeclareCaptionStyle{listing} [justification=raggedright, labelfont=bf]{}
\captionsetup[lstlisting]{style=listing}

\usepackage{verbdef}
\verbdef{\cmdl}{>}

\mdfsetup{% 
  backgroundcolor=lightgray!10,
  roundcorner=5pt}

\newcommand{\fs}[2]{
  %\begin{mdframed}[frametitle=#1.fsx,frametitlerulewidth=0.4pt,frametitlerule=true]
  \begin{mdframed}[frametitlerulewidth=0.4pt,frametitlerule=true]
    \lstinputlisting[language=fsharp]{#1.fsx}
    \noindent\makebox[\linewidth]{\rule{\linewidth}{0.4pt}}
    %\cmdl\texttt{ fsharpi #1.fsx}
    \lstinputlisting[language=console,caption={#1.fsx: #2},label=#1]{#1.out}
  \end{mdframed}
}
\newcommand{\fse}[2]{
  \begin{mdframed}[frametitle=#1.fsx,frametitlerulewidth=0.4pt,frametitlerule=true]
    \begin{minipage}{1\linewidth}
      \lstinputlisting[language=fsharp,caption={#2},label=#1]{#1.fsx}
    \end{minipage}
  \end{mdframed}
}

% highlighted text snippets
\newcommand{\advice}[1]{#1\marginpar{Advice!}}
\newcommand{\advanced}[1]{#1\marginpar{Advanced material}}

% paragraph indentation is stupid
\setlength\parindent{0pt}

% We want to emphasize problem formulation
\newenvironment{problem}{\begin{quote}}{\end{quote}}

% Notes to self
\newcommand{\jon}[1]{\marginpar{\raggedright\textbf{#1}}}
%\renewcommand{\jon}[1]{}


%%% Local Variables:
%%% TeX-master: "fsharpNotes"
%%% End:
